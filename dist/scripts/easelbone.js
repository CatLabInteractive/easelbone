define("CatLab/Easelbone/Utilities/Loader",["PreloadJS"],function(e){var t=function(){this.loader=new createjs.LoadQueue(!1)};return t.prototype.loadAssets=function(e,t){this.loader.loadManifest(e.properties.manifest,!0,t)},t.prototype.load=function(e){e()},t}),define("CatLab/Easelbone/Views/Layer",["EaselJS"],function(e){var t=function(){this.container=new e.Container,this.view=null};return t.prototype.setView=function(t){this.view!=null&&this.view.trigger("stage:removed"),this.view=t,this.container.removeAllChildren();var n=new e.Container;this.view.setElement(n),this.container.addChild(n),this.view.trigger("stage:added")},t.prototype.render=function(){if(!this.view)return;this.view.el.removeAllChildren(),this.view.trigger("render:before"),this.view.render(),this.view.trigger("render"),this.view.trigger("render:after")},t.prototype.tick=function(e){return!1},t}),define("CatLab/Easelbone/Views/Root",["backbone","EaselJS","CatLab/Easelbone/Views/Layer"],function(e,t,n){var r,i,s=!1;return e.View.extend({stage:null,container:null,hudcontainer:null,view:null,hud:null,initialize:function(e){var n=this;if(typeof e.canvas!="undefined")this.canvas=e.canvas,this.container=this.canvas.parentNode;else{if(typeof e.container=="undefined")throw new Error("Container must be defined for root view.");this.canvas=document.createElement("canvas"),this.container=e.container,this.container.appendChild(this.canvas)}this.stage=new t.Stage(this.canvas),this.layers=[],this.layerMap={},this.mainLayer=this.nextLayer("main"),t.Ticker.addEventListener("tick",function(e){n.tick(e)}),this.resize()},nextLayer:function(e){typeof e=="undefined"&&(e="Layer"+this.layers.length);var t=new n;return this.stage.addChild(t.container),this.layers.push(t),this.layerMap[e]=t,t},getLayer:function(e){return this.layerMap[e]},setView:function(e){this.mainLayer.setView(e),this.render()},tick:function(e){this.trigger("tick:before",e),s=!1;for(r=0;r<this.layers.length;r++)i=this.layers[r],i.tick(e)&&(s=!0);s&&this.update(),this.stage.handleEvent("tick",e),this.trigger("tick:after")},render:function(){for(r=0;r<this.layers.length;r++)this.layers[r].render();return this.update(),this},update:function(){this.stage.update()},fullscreen:function(){this.resizeFullscreen()},resize:function(){typeof this.container!="undefined"?(this.canvas.width=this.container.offsetWidth,this.canvas.height=this.container.offsetHeight):(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight),this.render()}})}),define("CatLab/Easelbone/Utilities/GlobalProperties",["backbone"],function(e){var t=e.Model.extend({initialize:function(){this.set({width:800,height:600})},getWidth:function(){return this.get("width")},getHeight:function(){return this.get("height")}});return new t}),define("CatLab/Easelbone/Views/Base",["backbone","CatLab/Easelbone/Utilities/GlobalProperties"],function(e,t){return e.View.extend({el:"div",setRootView:function(e){this.set("root",e)},getWidth:function(){return this.el.getStage().canvas.width},getHeight:function(){return this.el.getStage().canvas.height},scale:function(e){var t=this.getScale();e.scaleX=t.x,e.scaleY=t.y},getScale:function(e,n,r){if(typeof e=="undefined"||e===null)e=t.getWidth();if(typeof n=="undefined"||n===null)n=t.getHeight();typeof r=="undefined"&&(r=!1);var i=this.getWidth()/e,s=this.getHeight()/n,o=r?Math.max(i,s):Math.min(i,s);return{x:o,y:o}},addCenter:function(e,n,r,i,s){if(typeof n=="undefined"||n===null)n=t.getWidth();if(typeof r=="undefined"||r===null)r=t.getHeight();if(typeof s=="undefined"||s===null)s=1;var o=this.getScale(n,r,i);o.x=o.x*s,o.y=o.y*s,e.x=(this.getWidth()-n*o.x)/2,e.y=(this.getHeight()-r*o.y)/2,e.scaleX=o.x,e.scaleY=o.y,this.el.addChild(e);var u=new createjs.Graphics;e.x>0&&(u.beginFill(this.getBackground()).drawRect(0,0,Math.ceil(e.x),this.getHeight()),u.beginFill(this.getBackground()).drawRect(this.getWidth()-Math.ceil(e.x),0,Math.ceil(e.x),this.getHeight())),e.y>0&&(u.beginFill(this.getBackground()).drawRect(0,0,this.getWidth(),Math.ceil(e.y)),u.beginFill(this.getBackground()).drawRect(0,this.getHeight()-Math.ceil(e.y),this.getWidth(),Math.ceil(e.y)));var a=new createjs.Shape(u);this.el.addChild(a)},clear:function(){this.el.removeAllChildren();var e=new createjs.Graphics;e.beginFill(this.getBackground()).drawRect(0,0,this.getWidth(),this.getHeight());var t=new createjs.Shape(e);this.el.addChild(t)},getBackground:function(){return"#000000"},render:function(){var e=new createjs.Container;e.setBounds(0,0,this.getWidth(),this.getHeight());var t=new createjs.BigText("Please wait, initializing application","Arial","#000000");e.addChild(t),this.el.addChild(e)},tick:function(){return!1},afterRender:function(){},onRemove:function(){}})}),define("CatLab/Easelbone/Views/Navigatable",["CatLab/Easelbone/Views/Base"],function(e){return e.extend({_previesOptionIndex:0,_currentOptionIndex:0,_options:[],initialize:function(){this.initializeNavigatable()},initializeNavigatable:function(){var e=this;this.resetOptions()},setUsers:function(e){this.users=e;var t=this;for(var n=0;n<this.users.length;n++){var r=this.users[n];r.setView("catlab-nes"),r.clearEvents(),r.control("left").click(function(){t.callOptionLeft()}),r.control("right").click(function(){t.callOptionRight()}),r.control("a").click(function(){t.callOptionA()}),r.control("b").click(function(){t.callOptionB()}),r.control("up").click(function(){t.callOptionUp()}),r.control("down").click(function(){t.callOptionDown()})}},resetOptions:function(){this._options=[]},addControl:function(e){},addOption:function(e,t,n,r,i,s,o){this._options.push({button:e,optionA:t,optionB:n,optionUp:r,optionDown:i,optionLeft:s,optionRight:o})},nextOption:function(){this._previesOptionIndex=this._currentOptionIndex,this._currentOptionIndex=(this._currentOptionIndex+1)%this._options.length,this.updateOptions()},previousOption:function(){this._previesOptionIndex=this._currentOptionIndex,this._currentOptionIndex=(this._options.length+this._currentOptionIndex-1)%this._options.length,this.updateOptions()},selectOption:function(e){for(var t=0;t<this._options.length;t++)this._options[t].button==e&&(this._previesOptionIndex=this._currentOptionIndex,this._currentOptionIndex=t);this.updateOptions()},updateOptions:function(){this._options[this._previesOptionIndex].button.unactivate(),this._options[this._currentOptionIndex].button.activate()},callOptionA:function(){this._options[this._currentOptionIndex].optionA!=null&&this._options[this._currentOptionIndex].optionA()},callOptionB:function(){this._options[this._currentOptionIndex].optionB!=null&&this._options[this._currentOptionIndex].optionB()},callOptionUp:function(){this._options[this._currentOptionIndex].optionUp!=null&&this._options[this._currentOptionIndex].optionUp()},callOptionDown:function(){this._options[this._currentOptionIndex].optionDown!=null&&this._options[this._currentOptionIndex].optionDown()},callOptionLeft:function(){this._options[this._currentOptionIndex].optionLeft!=null&&this._options[this._currentOptionIndex].optionLeft()},callOptionRight:function(){this._options[this._currentOptionIndex].optionRight!=null&&this._options[this._currentOptionIndex].optionRight()},getCurrentOptionIndex:function(){for(var e=0;e<this._options.length;e++)if(this._options[e].isActive()){this._currentOptionIndex=e;break}}})}),define("CatLab/Easelbone/Controls/Slider",[],function(){var e=function(e){var t=this;this.element=e,this.value=.7,this.initialized=!1;var n=e.addEventListener("tick",function(){e.removeEventListener("tick",n),t.afterFirstFrame()})};return e.prototype.afterFirstFrame=function(){this.initialized=!0,this.setValue(this.value),this.element.gotoAndPlay("Over")},e.prototype.link=function(e,t){return this.setValue(e.get(t)),this},e.prototype.setValue=function(e){console.log(e),this.value=e,this.initialized&&this.element.setValue(this.value)},e}),define("CatLab/Easelbone/FrontController",["CatLab/Easelbone/Utilities/Loader","CatLab/Easelbone/Views/Root","CatLab/Easelbone/Views/Base","CatLab/Easelbone/Views/Navigatable","CatLab/Easelbone/Controls/Slider","CatLab/Easelbone/Utilities/GlobalProperties"],function(e,t,n,r,i,s){return{initialize:function(){},setProperties:function(e){s.set(e)},Views:{Root:t,Base:n,Navigatable:r},Controls:{Slider:i},Loader:new e}}),define("easelbone",["CatLab/Easelbone/FrontController"],function(e){return e});