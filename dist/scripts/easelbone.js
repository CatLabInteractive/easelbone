define("CatLab/Easelbone/Utilities/Loader",["PreloadJS"],function(e){var t=function(){this.loader=new createjs.LoadQueue(!1)};return t.prototype.loadAssets=function(e,t){this.loader.loadManifest(e.properties.manifest,!0,t)},t.prototype.load=function(e){e()},t}),define("CatLab/Easelbone/Views/Layer",["EaselJS"],function(e){var t=function(){this.container=new e.Container,this.view=null};return t.prototype.setView=function(t){this.view!=null&&this.view.trigger("stage:removed"),this.view=t,this.container.removeAllChildren();var n=new e.Container;this.view.setElement(n),this.container.addChild(n),this.view.trigger("stage:added")},t.prototype.render=function(){if(!this.view)return;this.view.el.removeAllChildren(),this.view.trigger("render:before"),this.view.render(),this.view.trigger("render"),this.view.trigger("render:after")},t.prototype.tick=function(e){return!1},t}),define("CatLab/Easelbone/Views/Root",["backbone","EaselJS","CatLab/Easelbone/Views/Layer"],function(e,t,n){var r,i,s=!1;return e.View.extend({stage:null,container:null,hudcontainer:null,view:null,hud:null,initialize:function(e){var n=this;if(typeof e.canvas!="undefined")this.canvas=e.canvas,this.container=this.canvas.parentNode;else{if(typeof e.container=="undefined")throw new Error("Container must be defined for root view.");this.canvas=document.createElement("canvas"),this.container=e.container,this.container.appendChild(this.canvas)}this.stage=new t.Stage(this.canvas),this.layers=[],this.layerMap={},this.mainLayer=this.nextLayer("main"),t.Ticker.addEventListener("tick",function(e){n.tick(e)}),t.Ticker.addEventListener("tick",this.stage),this.resize()},nextLayer:function(e){typeof e=="undefined"&&(e="Layer"+this.layers.length);var t=new n;return this.stage.addChild(t.container),this.layers.push(t),this.layerMap[e]=t,t},getLayer:function(e){return this.layerMap[e]},setView:function(e){this.mainLayer.setView(e),this.render()},tick:function(e){this.trigger("tick:before",e),s=!1;for(r=0;r<this.layers.length;r++)i=this.layers[r],i.tick(e)&&(s=!0);s&&this.update(),this.trigger("tick:after")},render:function(){for(r=0;r<this.layers.length;r++)this.layers[r].render();return this.update(),this},update:function(){this.stage.update()},fullscreen:function(){this.resizeFullscreen()},resize:function(){typeof this.container!="undefined"?(this.canvas.width=this.container.offsetWidth,this.canvas.height=this.container.offsetHeight):(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight),this.render()}})}),define("CatLab/Easelbone/Utilities/GlobalProperties",["backbone"],function(e){var t=e.Model.extend({initialize:function(){this.set({width:800,height:600})},getWidth:function(){return this.get("width")},getHeight:function(){return this.get("height")}});return new t}),define("CatLab/Easelbone/Views/Base",["backbone","CatLab/Easelbone/Utilities/GlobalProperties"],function(e,t){return e.View.extend({el:"div",setRootView:function(e){this.set("root",e)},getWidth:function(){return this.el.getStage().canvas.width},getHeight:function(){return this.el.getStage().canvas.height},scale:function(e){var t=this.getScale();e.scaleX=t.x,e.scaleY=t.y},getScale:function(e,n,r){if(typeof e=="undefined"||e===null)e=t.getWidth();if(typeof n=="undefined"||n===null)n=t.getHeight();typeof r=="undefined"&&(r=!1);var i=this.getWidth()/e,s=this.getHeight()/n,o=r?Math.max(i,s):Math.min(i,s);return{x:o,y:o}},addCenter:function(e,n,r,i,s){if(typeof n=="undefined"||n===null)n=t.getWidth();if(typeof r=="undefined"||r===null)r=t.getHeight();if(typeof s=="undefined"||s===null)s=1;var o=this.getScale(n,r,i);o.x=o.x*s,o.y=o.y*s,e.x=(this.getWidth()-n*o.x)/2,e.y=(this.getHeight()-r*o.y)/2,e.scaleX=o.x,e.scaleY=o.y,this.el.addChild(e);var u=new createjs.Graphics;e.x>0&&(u.beginFill(this.getBackground()).drawRect(0,0,Math.ceil(e.x),this.getHeight()),u.beginFill(this.getBackground()).drawRect(this.getWidth()-Math.ceil(e.x),0,Math.ceil(e.x),this.getHeight())),e.y>0&&(u.beginFill(this.getBackground()).drawRect(0,0,this.getWidth(),Math.ceil(e.y)),u.beginFill(this.getBackground()).drawRect(0,this.getHeight()-Math.ceil(e.y),this.getWidth(),Math.ceil(e.y)));var a=new createjs.Shape(u);this.el.addChild(a)},clear:function(){this.el.removeAllChildren();var e=new createjs.Graphics;e.beginFill(this.getBackground()).drawRect(0,0,this.getWidth(),this.getHeight());var t=new createjs.Shape(e);this.el.addChild(t)},getBackground:function(){return"#000000"},render:function(){var e=new createjs.Container;e.setBounds(0,0,this.getWidth(),this.getHeight());var t=new createjs.BigText("Please wait, initializing application","Arial","#000000");e.addChild(t),this.el.addChild(e)},tick:function(){return!1},afterRender:function(){},onRemove:function(){}})}),define("CatLab/Easelbone/Views/Navigatable",["CatLab/Easelbone/Views/Base"],function(e){return e.extend({_users:[],_currentIndex:null,_current:null,_options:[],_controls:{navigation:["left","right"],toggle:["a"],manipulation:["down","up"]},initialize:function(e){this.initializeNavigatable(e)},initializeNavigatable:function(e){typeof e.orientation!="undefined"&&e.orientation=="vertical"&&(this._controls.navigation=["up","down"],this._controls.manipulation=["left","right"]),console.log(this._controls),this.resetOptions()},setUsers:function(e){this._users=e;var t=this;console.log(this._controls);for(var n=0;n<this._users.length;n++){var r=this._users[n];r.setView("catlab-nes"),r.clearEvents(),r.control(this._controls.navigation[0]).click(function(){t.previous()}),r.control(this._controls.navigation[1]).click(function(){t.next()}),r.control(this._controls.toggle).click(function(){t.keyInput("a")}),r.control(this._controls.manipulation[0]).click(function(){t.keyInput("down")}),r.control(this._controls.manipulation[1]).click(function(){t.keyInput("up")})}},next:function(){this.activate((this._currentIndex+1)%this._options.length)},previous:function(){var e=this._currentIndex-1;e<0&&(e=this._options.length-1),this.activate(e)},keyInput:function(e){this._current&&this._current.keyInput(e)},resetOptions:function(){this._options=[]},addControl:function(e){var t=this;this._options.push(e),this._options.length===1?setTimeout(function(){t.activate(0)},1):e.deactivate()},activate:function(e){this._currentIndex!==null&&this._options[this._currentIndex].deactivate(),this._currentIndex=e,this._options[e].activate(),this._current=this._options[e]}})}),define("CatLab/Easelbone/Controls/Base",["underscore","backbone"],function(e,t){var n=function(){this.checked=!1,this.active=!1};return e.extend(n,t.Events),n.prototype.activate=function(){this.active=!0,this.update()},n.prototype.deactivate=function(){this.active=!1,this.update()},n.prototype.update=function(){this.active?this.checked?this.element.gotoAndPlay("Hit"):this.element.gotoAndPlay("Over"):this.checked?this.element.gotoAndPlay("Down"):this.element.gotoAndPlay("Up")},n}),define("CatLab/Easelbone/Utilities/Path",[],function(){var e=function(e,t){this.start={x:e.x,y:e.y},this.end={x:t.x,y:t.y},this.distance={x:t.x-e.x,y:t.y-e.y}};return e.prototype.getPosition=function(e){return{x:this.start.x+this.distance.x*e,y:this.start.y+this.distance.y*e}},e.prototype.position=function(e,t){var n=this.getPosition(t);e.x=n.x,e.y=n.y},e}),define("CatLab/Easelbone/Controls/Slider",["CatLab/Easelbone/Controls/Base","CatLab/Easelbone/Utilities/Path"],function(e,t){var n=function(e){this.element=e,this.path=new t(this.element.minimum,this.element.maximum),this.setValue(.5)};return n.prototype=new e,n.prototype.link=function(e,t){return this.setValue(e.get(t)),this},n.prototype.setValue=function(e){this.value=e,this.path.position(this.element.pointer,this.value)},n.prototype.keyInput=function(e){console.log(e);switch(e){case"up":this.value=Math.min(1,this.value+.1);break;case"down":this.value=Math.max(0,this.value-.1)}this.setValue(this.value)},n}),define("CatLab/Easelbone/Controls/Checkbox",["CatLab/Easelbone/Controls/Base"],function(e){var t=function(e){this.element=e};return t.prototype=new e,t.prototype.keyInput=function(e){switch(e){case"a":this.checked=!this.checked,this.update()}},t}),define("CatLab/Easelbone/EaselJS/DisplayObjects/BigText",["EaselJS"],function(e){var t,n,r=!1,i=function(e,t,n){this.textstring=e,this.font=t,this.color=n,this.initialize(),this.initialized=!1,this.limits=null},s=i.prototype=new e.Container;return s.Container_initialize=s.initialize,s.initialize=function(){this.Container_initialize()},s.isVisible=function(){return!0},s.setText=function(e){this.initialized=!1,this.textstring=e},s.setLimits=function(e,t){this.limits={width:e,height:t}},s.getAvailableSpace=function(){return this.limits!==null?this.limits:(this.parent?(t=this.parent.getBounds().width,n=this.parent.getBounds().height):this.getBounds()?(t=this.getBounds().width,n=this.getBounds().height):(t=100,n=100),{width:t,height:n})},s.goBigOrGoHome=function(t,n,r){function a(){u--;if(u<0)return!1;var a=new e.Text(t,s+"px "+i.font,i.color);return a.lineWidth=n,a.getBounds().height<r&&a.getBounds().width<=n?(o=a,s++,!0):!1}var i=this,s=10,o=new e.Text(""+String(t),s+"px "+this.font,this.color),u=500;while(a());return o},s.Container_draw=s.draw,s.draw=function(t,n){if(this.initialized)return this.Container_draw(t,n);this.initialized=!0,this.removeAllChildren();var i=this.getAvailableSpace();if(r){var s=new e.Shape;s.graphics.beginStroke("#FFA500"),s.graphics.setStrokeStyle(1),s.snapToPixel=!0,s.graphics.drawRect(0,0,i.width,i.height),this.addChild(s)}var o=this.goBigOrGoHome(this.textstring,i.width,i.height);return o.textAlign="center",o.x=(i.width-o.getBounds().width)/2+o.getBounds().width/2,o.y=(i.height-o.getBounds().height)/2,this.addChild(o),this.Container_draw(t,n)},e.BigText=i,i}),define("CatLab/Easelbone/Controls/Button",["CatLab/Easelbone/Controls/Base","CatLab/Easelbone/EaselJS/DisplayObjects/BigText"],function(e,t){var n=function(e){this.element=e,this.checked=!1};return n.prototype=new e,n.prototype.setText=function(e,n,r){var i=new t(e,n,r);i.setLimits(160,50),this.element.text.addChild(i)},n.prototype.keyInput=function(e){switch(e){case"a":this.trigger("button:clicked")}},n}),define("CatLab/Easelbone/FrontController",["CatLab/Easelbone/Utilities/Loader","CatLab/Easelbone/Views/Root","CatLab/Easelbone/Views/Base","CatLab/Easelbone/Views/Navigatable","CatLab/Easelbone/Controls/Slider","CatLab/Easelbone/Controls/Checkbox","CatLab/Easelbone/Controls/Button","CatLab/Easelbone/EaselJS/DisplayObjects/BigText","CatLab/Easelbone/Utilities/GlobalProperties"],function(e,t,n,r,i,s,o,u,a){return{initialize:function(){},setProperties:function(e){a.set(e)},Views:{Root:t,Base:n,Navigatable:r},Controls:{Slider:i,Checkbox:s,Button:o},EaselJS:{BigText:u},Loader:new e}}),define("easelbone",["CatLab/Easelbone/FrontController"],function(e){return e});