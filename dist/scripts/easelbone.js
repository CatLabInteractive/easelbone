define("CatLab/Easelbone/Utilities/Loader",["preloadjs"],function(e){var t=function(){this.loader=new createjs.LoadQueue(!1)};return t.prototype.loadAssets=function(e,t){this.loader.loadManifest(e.properties.manifest,!0,t)},t.prototype.load=function(e){e()},t});
define("CatLab/Easelbone/Views/Layer",["easeljs","underscore","backbone"],function(e,i,t){var n=function(n){i.extend(this,t.Events),void 0===n&&(n={}),void 0!==n.container?this.container=n.container:this.container=new e.Container,this.view=null};return n.prototype.setView=function(i){null!==this.view&&this.view.trigger("stage:removed"),this.view=i,this.container.removeAllChildren();var t=new e.Container;this.view.setElement(t),this.container.addChild(t),this.view.on("all",function(e){this.trigger("view:"+e)}.bind(this)),this.view.trigger("stage:added")},n.prototype.render=function(){this.view&&(this.view.el.removeAllChildren(),this.view.trigger("render:before"),this.view.render(),this.view.trigger("render"),this.view.trigger("render:after"))},n.prototype.tick=function(e){return!!this.view&&this.view.tick(e)},n});
define("CatLab/Easelbone/Views/Root",["backbone","easeljs","CatLab/Easelbone/Views/Layer"],function(t,i,e){var n,a=!1;return t.View.extend({stage:null,container:null,hudcontainer:null,view:null,hud:null,maxCanvasSize:null,initialize:function(t){if(void 0!==t.canvas)this.canvas=t.canvas,this.container=this.canvas.parentNode;else{if(void 0===t.container)throw new Error("Container must be defined for root view.");this.canvas=document.createElement("canvas"),this.container=t.container,this.container.appendChild(this.canvas)}this.stage=this.createStage(),this.layers=[],this.layerMap={},this.mainLayer=this.nextLayer("main"),i.Ticker.addEventListener("tick",function(t){this.tick(t)}.bind(this)),this.resize()},createStage:function(){return new i.StageGL(this.canvas)},setMaxCanvasSize:function(t,i){this.maxCanvasSize=[t,i]},nextLayer:function(t){void 0===t&&(t="Layer"+this.layers.length);var i=new e;return this.stage.addChild(i.container),this.layers.push(i),this.layerMap[t]=i,i},getLayer:function(t){return this.layerMap[t]},setView:function(t){this.mainLayer.setView(t),this.render()},tick:function(t){for(this.trigger("tick:before",t),a=!1,n=0;n<this.layers.length;n++)this.layers[n].tick(t)&&(a=!0);a&&this.update(),this.trigger("tick:after")},render:function(){for(n=0;n<this.layers.length;n++)this.layers[n].render();return this.update(),this},update:function(){this.stage.update()},fullscreen:function(){},resize:function(){void 0!==this.container?(this.canvas.width=this.container.offsetWidth,this.canvas.height=this.container.offsetHeight):(this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight),null!==this.maxCanvasSize&&(this.canvas.width=Math.min(this.canvas.width,this.maxCanvasSize[0]),this.canvas.height=Math.min(this.canvas.height,this.maxCanvasSize[1])),this.render()}})});
define("CatLab/Easelbone/Utilities/GlobalProperties",["backbone"],function(t){return new(t.Model.extend({initialize:function(){this.set({width:800,height:600,font:"sans-serif",textColor:"white"})},getWidth:function(){return this.get("width")},getHeight:function(){return this.get("height")},getDefaultFont:function(){return this.get("font")},getDefaultTextColor:function(){return this.get("textColor")},ifUndefined:function(t,e){return null!=t?t:e}}))});
define("CatLab/Easelbone/EaselJS/DisplayObjects/Placeholder",["easeljs"],function(i){var t=function(i){void 0!==i&&(this.initialize(),this.initializePlaceholder(i))};return(t.prototype=new i.Container).initializePlaceholder=function(t){var e,n,a,s=this,d="0:0",h="0:0";if(t.original_draw=t.draw,t.original_tick=t._tick,t.draw=function(i,e){return this.updateBounds(),this.updateZIndex(),t.original_draw.apply(t,arguments)},this.getBoundsHash=function(){return this.getBounds()?d=this.getBounds().width+":"+this.getBounds().height:null},this.hasBoundsChanged=function(){if(this.getBoundsHash()!==h)return h=d,!0},t._tick=function(){return this.updateZIndex(),t.original_tick.apply(t,arguments)},t.updateZIndex=function(){n=t.parent.getChildIndex(s),(a=t.parent.getChildIndex(t))+1!==n&&t.parent.addChildAt(s,a+1)},t.updateBounds=function(){s.setBounds(0,0,Math.ceil(100*this.scaleX),Math.ceil(100*this.scaleY)),s.x=this.x,s.y=this.y,s.rotation=this.rotation,s.hasBoundsChanged()&&(this.mask?s.mask=this.mask:this.originalMask&&(s.mask=this.originalMask),this.mask=!1,e=new i.Event("bounds:change"),s.dispatchEvent(e))},t.children)for(var l=0;l<t.children.length;l++)t.children[l].visible=!1;if(t.shape&&(t.shape=new i.Shape),t.timeline&&(t.timeline=new i.Timeline(null,[],{paused:!0,position:0,useTicks:!0})),t.parent){var r=t.parent.getChildIndex(t);t.parent.addChildAt(s,r+1),s.dispatchEvent("initialized")}else t.addEventListener("added",function(){var i=t.parent.getChildIndex(t);t.parent.addChildAt(s,i+1),s.dispatchEvent("initialized")})},t});
define("CatLab/Easelbone/Views/Base",["backbone","easeljs","CatLab/Easelbone/Utilities/GlobalProperties","CatLab/Easelbone/EaselJS/DisplayObjects/Placeholder"],function(e,t,i,n){"use strict";return e.View.extend({el:"div",screen:null,setRootView:function(e){this.set("root",e)},getWidth:function(){return this.getStage().canvas.width},getHeight:function(){return this.getStage().canvas.height},getStage:function(){return void 0!==this.el.stage?this.el.stage:void 0!==this.el.getStage?this.el.getStage():void 0},setScreen:function(e){return this.screen=e,this},hasLabeledFrame:function(e,t){if(void 0===t&&(t=this.screen),!t)throw new Error("hasLabeledFrame requires a screen to be set or a container to be provided.");if(void 0===t.timeline)return!1;for(var i=t.timeline.getLabels(),n=0;n<i.length;n++)if(i[n].label===e)return!0;return!1},scale:function(e){var t=this.getScale();e.scaleX=t.x,e.scaleY=t.y},getScale:function(e,t,n){null==e&&(e=i.getWidth()),null==t&&(t=i.getHeight()),void 0===n&&(n=!1);var r=this.getWidth()/e,a=this.getHeight()/t,s=n?Math.max(r,a):Math.min(r,a);return{x:s,y:s}},addCenter:function(e,n,r,a,s){null==n&&(n=i.getWidth()),null==r&&(r=i.getHeight()),null==s&&(s=1);var h=this.getScale(n,r,a);h.x=h.x*s,h.y=h.y*s,e.x=(this.getWidth()-n*h.x)/2,e.y=(this.getHeight()-r*h.y)/2,e.scaleX=h.x,e.scaleY=h.y,this.el.addChild(e);var o=new t.Graphics;e.x>=1&&(o.beginFill(this.getBackground()).drawRect(0,0,Math.ceil(e.x),this.getHeight()),o.beginFill(this.getBackground()).drawRect(this.getWidth()-Math.ceil(e.x),0,Math.ceil(e.x),this.getHeight())),e.y>=1&&(o.beginFill(this.getBackground()).drawRect(0,0,this.getWidth(),Math.ceil(e.y)),o.beginFill(this.getBackground()).drawRect(0,this.getHeight()-Math.ceil(e.y),this.getWidth(),Math.ceil(e.y)));var c=new t.Shape(o);this.el.addChild(c)},clear:function(){this.el.removeAllChildren();var e=new t.Graphics;e.beginFill(this.getBackground()).drawRect(0,0,this.getWidth(),this.getHeight());var i=new t.Shape(e);this.el.addChild(i)},getBackground:function(){return"#000000"},render:function(){if(this.screen)return this.addCenter(this.screen),this;var e=new t.Container;e.setBounds(0,0,this.getWidth(),this.getHeight());var i=new t.BigText("easelbone view: no screen set and render function was not overridden...","Arial","#000000");e.addChild(i),this.el.addChild(e)},findPlaceholders:function(e,t){var i=[];return this.findFromNames(e,t).forEach(function(e){i.push(new n(e))}),i},findFromNames:function(e,t){if(void 0===t&&(t=[],this.screen&&t.push(this.screen)),Array.isArray(t)||(t=[t]),0===t.length)throw new Error("findFromNames requires a screen to be set or a container to be provided.");Array.isArray(e)||(e=[e]);var i=[];return e.forEach(function(e){var n=e.split("."),r=n.shift();t.forEach(function(e){var t=this.findFromNameInContainer(e,r);n.length>0&&(t=this.findFromNames(n.join("."),t)),i=i.concat(t)}.bind(this))}.bind(this)),i},findFromNameInContainer:function(e,i,n){for(var r in void 0===n&&(n=[]),e[i]instanceof t.DisplayObject&&n.push(e[i]),e)if(e.hasOwnProperty(r)){switch(r){case"parent":case"mask":continue}e[r]instanceof t.DisplayObject&&this.findFromNameInContainer(e[r],i,n)}return n},tick:function(){return!0},afterRender:function(){},onRemove:function(){}})});
define("CatLab/Easelbone/Views/Navigatable",["underscore","CatLab/Easelbone/Views/Base"],function(t,i){return i.extend({ORIENTATION:{VERTICAL:"vertical",HORIZONTAL:"horizontal"},DefaultControls:{navigation:["left","right"],toggle:["start","a"],manipulation:["down","up"],back:["b","back"]},initialize:function(t){this.initializeNavigatable(t)},initializeNavigatable:function(i){i=i||{},this._users=[],this._currentIndex=-1,this._current=null,this._options=[],this._backCallback=null,this._controls=t.extend(this.DefaultControls,{}),void 0!==i.orientation&&(i.orientation===this.ORIENTATION.VERTICAL?(this._controls.navigation=["up","down"],this._controls.manipulation=["left","right"]):(this._controls.navigation=["left","right"],this._controls.manipulation=["up","down"])),this.resetOptions()},setUsers:function(t){this._users=t;for(var i=0;i<this._users.length;i++)this.setWebremoteControls(this._users[i])},setWebremoteControls:function(t){t.setView("catlab-nes"),t.clearEvents(),t.control(this._controls.navigation[0]).click(function(){this.previous()}.bind(this)),t.control(this._controls.navigation[1]).click(function(){this.next()}.bind(this));for(var i=0;i<this._controls.toggle.length;i++)(function(i){t.control(this._controls.toggle[i]).click(function(){this.keyInput(this._controls.toggle[i])}.bind(this))}).bind(this)(i);for(i=0;i<this._controls.back.length;i++)(function(i){t.control(this._controls.back[i]).click(function(){this.triggerBack()}.bind(this))}).bind(this)(i);t.control(this._controls.manipulation[0]).click(function(){this.keyInput("down")}.bind(this)),t.control(this._controls.manipulation[1]).click(function(){this.keyInput("up")}.bind(this))},setBack:function(t){this._backCallback=t},triggerBack:function(){null!==this._backCallback&&this._backCallback.apply()},next:function(){this.activate((this._currentIndex+1)%this._options.length)},previous:function(){var t=this._currentIndex-1;t<0&&(t=this._options.length-1),this.activate(t)},keyInput:function(t){this._current&&this._current.keyInput(t)},resetOptions:function(){this._options=[]},addControl:function(t){this._options.push(t),1===this._options.length?setTimeout(function(){this.activate(0,!1)}.bind(this),1):t.deactivate(!1)},activate:function(t,i){void 0===i&&(i=!0),-1!==this._currentIndex&&null!==this._currentIndex&&this._options[this._currentIndex].deactivate(i),this._currentIndex=t,this._options[t].activate(i),this._current=this._options[t]}})});
define("CatLab/Easelbone/Controls/Base",["underscore","backbone"],function(t,e){var i=function(i){this.checked=!1,this.active=!1,this.element=i,t.extend(this,e.Events)};return i.prototype.activate=function(t){this.active=!0,this.update(t)},i.prototype.deactivate=function(t){this.active=!1,this.update(t)},i.prototype.update=function(t){void 0===t&&(t=!0);var e;e=this.active?this.checked?"Hit":"Over":this.checked?"Down":"Up",this.gotoWithAnimate(e,t)},i.prototype.gotoWithAnimate=function(t,e){e||!this.element.timeline.resolve(t+"-NoAnim")?this.element.gotoAndPlay(t):this.element.gotoAndPlay(t+"-NoAnim")},i});
define("CatLab/Easelbone/Utilities/Path",[],function(){var t,i=function(t,i){this.start={x:t.x,y:t.y},this.end={x:i.x,y:i.y},this.distance={x:i.x-t.x,y:i.y-t.y},this.orientation=this.distance.x>this.distance.y?"horizontal":"vertical",this.indicatorSize={x:0,y:0}};return i.prototype.getPosition=function(t){return isNaN(t)&&(t=0),{x:this.start.x+(this.distance.x-this.indicatorSize.x)*t,y:this.start.y+(this.distance.y-this.indicatorSize.y)*t}},i.prototype.getValue=function(i,n){return t="horizontal"===this.orientation?(i-this.start.x)/this.distance.x:(n-this.start.y)/this.distance.y,Math.max(0,Math.min(1,t))},i.prototype.position=function(t,i){var n=this.getPosition(i);t.x=n.x,t.y=n.y},i.prototype.setIndicatorSize=function(t,i){this.indicatorSize={x:t,y:i}},i});
define("CatLab/Easelbone/Controls/Slider",["CatLab/Easelbone/Controls/Base","CatLab/Easelbone/Utilities/Path"],function(t,e){var i=function(t){var i;this.element=t,this.step=.1,this.path=new e(this.element.minimum,this.element.maximum),this.setValue(.5),this.element.pointer.on("pressmove",function(t){i=this.element.globalToLocal(t.stageX,t.stageY),this.setValue(this.path.getValue(i.x,i.y))}.bind(this)),this.element.pointer.on("click",function(t){t.stopPropagation()}),this.element.on("click",function(t){i=this.element.globalToLocal(t.stageX,t.stageY),this.setValue(this.path.getValue(i.x,i.y))}.bind(this))};return(i.prototype=Object.create(t.prototype)).constructor=i,i.prototype.link=function(t,e){return this.setValue(t.get(e)),this},i.prototype.setValue=function(t){this.value=t,this.path.position(this.element.pointer,this.value)},i.prototype.keyInput=function(t){switch(t){case"up":this.value=Math.min(1,this.value+this.step);break;case"down":this.value=Math.max(0,this.value-this.step)}this.setValue(this.value)},i});
define("CatLab/Easelbone/Controls/Checkbox",["CatLab/Easelbone/Controls/Base"],function(t){var e=function(e){t.call(this,e),this.element=e,this.element.addEventListener("click",function(){this.toggle()}.bind(this))};return(e.prototype=Object.create(t.prototype)).constructor=e,e.prototype.toggle=function(){this.checked=!this.checked,this.update()},e.prototype.check=function(){this.checked=!0,this.update()},e.prototype.uncheck=function(){this.checked=!1,this.update()},e.prototype.keyInput=function(t){switch(t){case"a":case"start":this.toggle()}},e});
define("CatLab/Easelbone/EaselJS/DisplayObjects/BigText",["easeljs","CatLab/Easelbone/Utilities/GlobalProperties"],function(t,i){var e,n,h,s,a,r,o,l=!1,g={width:0,height:0},d={},f={},u=function(t,e,n,h){this.textstring=t,this.font=i.ifUndefined(e,i.getDefaultFont()),this.color=i.ifUndefined(n,i.getDefaultTextColor()),this.align=void 0===h?"center":h,this.initialize(),this.initialized=!1,this.limits=null,this.debug=!1,this.fontsize=0};function c(t){o=t.getMetrics(),g.height=o.height,g.width=o.width}function x(i,e){var n=t.Text._workingContext;n.save();var h=i._prepContext(n).measureText(e);return n.restore(),h}u.setFontOffset=function(t,i,e){f[t]={x:i,y:e}};var w=u.prototype=new t.Container;return w.Container_initialize=w.initialize,w.Container_tick=w._tick,w.getFontOffset=function(t){var i=t.split(" ");return i.shift(),i=i.join(" "),void 0===f[i]?{x:0,y:0}:f[i]},w.initialize=function(){this.Container_initialize()},w.isVisible=function(){return!0},w.setText=function(t){this.textstring=t,this.textElement&&(this.textElement.text=t)},w.setLimits=function(t,i){this.limits={width:t,height:i}},w.getAvailableSpace=function(){return null!==this.limits?this.limits:(this.getBounds()?(e=this.getBounds().width,n=this.getBounds().height):this.parent&&this.parent.getBounds()?(e=this.parent.getBounds().width,n=this.parent.getBounds().height):(e=0,n=0),{width:e,height:n})},w.goBigOrGoHome=function(i,e,n){var h=this,s=5,a=new t.Text(""+String(i),s+"px "+this.font,this.color);if(!a.getBounds())return a;var r=500;function o(){if(--r<0)return!1;var o=new t.Text(i,s+"px "+h.font,h.color);return o.lineWidth=e,o.lineHeight=function(t){return void 0===d[t.font]&&(d[t.font]=function(t){return 1.2*Math.max(x(t,"M").width,x(t,"m").width)}(t)),d[t.font]}(o),c(o),g.height<n&&g.width<=e&&(a=o,s++,!0)}for(;o(););return this.fontsize=s,a},w.Container_draw=w.draw,w.getLocationHash=function(){return h=(h=this.getAvailableSpace()).width+":"+h.height+":"+this.textstring,s=this.localToGlobal(this.x,this.y),h=s.x+":"+s.y+":"+h+":"+this.align},w.hasChanged=function(){return h=this.getLocationHash(),l=this.lastHash!==h,this.lastHash=h,l},w.drawText=function(){this.initialized=!0,this.removeAllChildren(),this.uncache();var i=this.getAvailableSpace();if(0!==i.width&&0!==i.height){if(this.debug){var e=new t.Shape;e.graphics.beginStroke("#FFA500"),e.graphics.setStrokeStyle(1),e.snapToPixel=!0,e.graphics.drawRect(0,0,i.width,i.height),this.addChild(e)}var n=this.goBigOrGoHome(this.textstring,i.width,i.height);this.textElement=n,n.textBaseline="top",n.textAlign=this.align,c(n),a=g.height,r=g.width,"center"===this.align?n.x=(i.width-r)/2+r/2:"left"===this.align?n.x=0:"right"===this.align&&(n.x=i.width-r),o=n.getMetrics();var h=this.getFontOffset(n.font);n.y=n.lineHeight*h.y+(i.height-a)/2,this.addChild(n)}},w.redrawText=function(){this.drawText()},w._tick=function(t){this.Container_tick(t),this.initialized?this.hasChanged()&&this.redrawText():this.drawText()},t.BigText=u,u});
define("CatLab/Easelbone/EaselJS/DisplayObjects/TextPlaceholder",["CatLab/Easelbone/EaselJS/DisplayObjects/Placeholder"],function(e){return e});
define("CatLab/Easelbone/Controls/Button",["CatLab/Easelbone/Controls/Base","CatLab/Easelbone/EaselJS/DisplayObjects/BigText","CatLab/Easelbone/EaselJS/DisplayObjects/TextPlaceholder"],function(t,e,n){var s=function(e){if(t.call(this,e),!this.element.text)throw"All buttons should have a text placeholder.";this.convertText(),this.element.addEventListener("click",function(){this.trigger("click")}.bind(this))};return(s.prototype=Object.create(t.prototype)).constructor=s,s.prototype.setText=function(t,n,s){var i=new e(t,n,s);this.text.addChild(i)},s.prototype.convertText=function(){if(this.element.text instanceof createjs.Text){var t=this;this.setText=function(e){t.element.text.text=e}}else this.text=new n(this.element.text)},s.prototype.keyInput=function(t){switch(t){case"a":case"start":this.trigger("click")}},s});
define("CatLab/Easelbone/Controls/Selectbox",["CatLab/Easelbone/Controls/Base","CatLab/Easelbone/EaselJS/DisplayObjects/BigText","CatLab/Easelbone/EaselJS/DisplayObjects/TextPlaceholder"],function(e,t,s){var l=function(s){if(e.call(this,s),this.repeat=!1,this.textcontainer=t,this.selectedIndex=0,this.selectedValue=null,this.allValues=[],!this.element.value)throw"All selectboxes should have a text placeholder.";if(!this.element.buttons)throw"All selectboxes must have a buttons object";this.element.buttons.on("click",function(e){this.element.buttons.globalToLocal(e.stageX,e.stageY).y>40?this.previous():this.next()}.bind(this)),this.convertText()};return(l.prototype=Object.create(e.prototype)).constructor=l,l.prototype.setText=function(e,t,s){var l=new this.textcontainer(e,t,s);this.textElement.removeAllChildren(),this.textElement.addChild(l)},l.prototype.convertText=function(){this.textElement=new s(this.element.value)},l.prototype.setValues=function(e){var t=[];if(e instanceof Array){for(var s=0;s<e.length;s++)t.push({text:e[s],value:e[s]});e=t}else for(var l in e)if(e.hasOwnProperty(l)){var n=e[l];n instanceof Object?t.push(n):t.push({text:n,value:l})}this.allValues=t,this.select(0)},l.prototype.getValue=function(){return this.value},l.prototype.select=function(e){e<0||e>this.values.length-1||(this.selectedIndex=e,this.selectedValue=this.values[this.selectedIndex],this.setText(this.selectedValue.text))},l.prototype.getIndexFromText=function(e){for(var t=0;t<this.allValues.length;t++)if(this.allValues[t].text==e)return t;return null},l.prototype.getIndexFromValue=function(e){for(var t=0;t<this.allValues.length;t++)if(this.allValues[t].value==e)return t;return null},l.prototype.next=function(){this.selectedIndex<this.allValues.length-1?this.select(this.selectedIndex+1):this.repeat&&this.select(0)},l.prototype.previous=function(){this.selectedIndex>0?this.select(this.selectedIndex-1):this.repeat&&this.select(this.allValues.length-1)},l.prototype.keyInput=function(e){switch(e){case"up":this.next();break;case"down":this.previous()}},Object.defineProperty(l.prototype,"text",{get:function(){return this.selectedValue.text},set:function(e){var t=this.getIndexFromText(e);null!==t&&(this.index=t)}}),Object.defineProperty(l.prototype,"value",{get:function(){return this.selectedValue.value},set:function(e){var t=this.getIndexFromValue(e);null!==t&&(this.index=t)}}),Object.defineProperty(l.prototype,"index",{get:function(){return this.selectedIndex},set:function(e){this.select(e)}}),Object.defineProperty(l.prototype,"values",{get:function(){return this.allValues},set:function(e){this.setValues(e)}}),l});
define("CatLab/Easelbone/Controls/ScrollBar",["underscore","CatLab/Easelbone/Utilities/Path"],function(t,e){var n,i=function(t){var i=this;this.element=t,this.element.up.on("click",this.up,this),this.element.down.on("click",this.down,this),this.path=new e(this.element.minimum,this.element.maximum),this.containers=[],this.element.on("pressmove",function(t){n=i.element.globalToLocal(t.stageX,t.stageY),i.scrollTo(i.path.getValue(n.x,n.y))})},o=i.prototype;return o.link=function(t){this.containers.push(t),t.on("scroll",this.onScroll,this)},o.up=function(){t.each(this.containers,function(t){t.up()})},o.down=function(){t.each(this.containers,function(t){t.down()})},o.getIndicatorSize=function(){return n=this.element.indicator.bottom&&this.element.indicator.top?{x:(this.element.indicator.bottom.x-this.element.indicator.top.x)*this.element.indicator.scaleX,y:(this.element.indicator.bottom.y-this.element.indicator.top.y)*this.element.indicator.scaleY}:{x:0,y:0}},o.scrollTo=function(e){t.each(this.containers,function(t){t.scrollTo(e)})},o.onScroll=function(t){Math.min(1,t.containerHeight/t.contentHeight),n=this.getIndicatorSize(),this.path.setIndicatorSize(n.x,n.y),this.path.position(this.element.indicator,t.percentage)},i});
define("CatLab/Easelbone/Utilities/Deferred",[],function(){function e(e){return"[object Array]"===Object.prototype.toString.call(e)}function n(n,t){if(e(n))for(var r=0;r<n.length;r++)t(n[r]);else t(n)}function t(r){var i="pending",o=[],f=[],l=[],s=null,u={done:function(){for(var n=0;n<arguments.length;n++)if(arguments[n])if(e(arguments[n]))for(var t=arguments[n],r=0;r<t.length;r++)"resolved"===i&&t[r].apply(this,s),o.push(t[r]);else"resolved"===i&&arguments[n].apply(this,s),o.push(arguments[n]);return this},fail:function(){for(var n=0;n<arguments.length;n++)if(arguments[n])if(e(arguments[n]))for(var t=arguments[n],r=0;r<t.length;r++)"rejected"===i&&t[r].apply(this,s),f.push(t[r]);else"rejected"===i&&arguments[n].apply(this,s),f.push(arguments[n]);return this},always:function(){return this.done.apply(this,arguments).fail.apply(this,arguments)},progress:function(){for(var n=0;n<arguments.length;n++)if(arguments[n])if(e(arguments[n]))for(var t=arguments[n],r=0;r<t.length;r++)"pending"===i&&l.push(t[r]);else"pending"===i&&l.push(arguments[n]);return this},then:function(){arguments.length>1&&arguments[1]&&this.fail(arguments[1]),arguments.length>0&&arguments[0]&&this.done(arguments[0]),arguments.length>2&&arguments[2]&&this.progress(arguments[2])},promise:function(e){if(null==e)return u;for(var n in u)e[n]=u[n];return e},state:function(){return i},debug:function(){console.log("[debug]",o,f,i)},isRejected:function(){return"rejected"===i},isResolved:function(){return"resolved"===i},pipe:function(e,r,i){return t(function(t){n(e,function(e){"function"==typeof e?h.done(function(){var n=e.apply(this,arguments);n&&"function"==typeof n?n.promise().then(t.resolve,t.reject,t.notify):t.resolve(n)}):h.done(t.resolve)}),n(r,function(e){"function"==typeof e?h.fail(function(){var n=e.apply(this,arguments);n&&"function"==typeof n?n.promise().then(t.resolve,t.reject,t.notify):t.reject(n)}):h.fail(t.reject)})}).promise()}},h={resolveWith:function(e){if("pending"===i){i="resolved";for(var n=s=arguments.length>1?arguments[1]:[],t=0;t<o.length;t++)o[t].apply(e,n)}return this},rejectWith:function(e){if("pending"===i){i="rejected";for(var n=s=arguments.length>1?arguments[1]:[],t=0;t<f.length;t++)f[t].apply(e,n)}return this},notifyWith:function(e){if("pending"===i)for(var n=s=arguments.length>1?arguments[1]:[],t=0;t<l.length;t++)l[t].apply(e,n);return this},resolve:function(){return this.resolveWith(this,arguments)},reject:function(){return this.rejectWith(this,arguments)},notify:function(){return this.notifyWith(this,arguments)}},p=u.promise(h);return r&&r.apply(p,[p]),p}return t.when=function(){if(arguments.length<2){var e=arguments.length?arguments[0]:void 0;return e&&"function"==typeof e.isResolved&&"function"==typeof e.isRejected?e.promise():t().resolve(e).promise()}return function(e){for(var n=t(),r=e.length,i=0,o=new Array(r),f=0;f<e.length;f++)!function(t){var f=null;e[t].done?e[t].done(function(){o[t]=arguments.length<2?arguments[0]:arguments,++i==r&&n.resolve.apply(n,o)}).fail(function(){n.reject(arguments)}):(f=e[t],e[t]=new Deferred,e[t].done(function(){o[t]=arguments.length<2?arguments[0]:arguments,++i==r&&n.resolve.apply(n,o)}).fail(function(){n.reject(arguments)}).resolve(f))}(f);return n.promise()}(arguments)},t});
define("CatLab/Easelbone/EaselJS/DisplayObjects/ScrollArea",["easeljs","CatLab/Easelbone/EaselJS/DisplayObjects/Placeholder","CatLab/Easelbone/Utilities/Deferred"],function(t,e){var i,s=function(i){this.initialize();var s=new e(i);s.on("bounds:change",function(){var e=s.getBounds(),i=new t.Shape;i.graphics.drawRect(0,0,e.width,e.height),void 0!==this.setMask?this.setMask(i):this.mask=i}.bind(this)),s.addChild(this),this.on("tick",function(){this.setScroll(0)},this,!0),Object.defineProperty(this,"scroll",{set:function(t){this.setScroll(t)},get:function(){return this.getScroll()}})},n=s.prototype=new e;return n.isActive=function(){return null!==this.getBounds()&&null!==this.parent&&null!==this.parent.getBounds()},n.getFinalDestination=function(t){return this.isActive()?t<0?0:this.getBounds().height-this.parent.getBounds().height<0?0:t>this.getBounds().height-this.parent.getBounds().height?0-(this.getBounds().height-this.parent.getBounds().height):0-t:0},n.setScroll=function(t){return this.oldY=this.y,this.y=this.getFinalDestination(t),this.oldY!==this.y&&this.onScroll(),this},n.getDistance=function(t){return Math.abs(this.y-this.getFinalDestination(t))},n.getScroll=function(){return 0-this.y},n.down=function(t){return this.setScroll(this.getScroll()+t)},n.up=function(t){return this.setScroll(this.getScroll()-t)},n.getPercentage=function(){return this.getBounds()?this.getScroll()/(this.getBounds().height-this.parent.getBounds().height):0},n.focus=function(e,i,s){var n=new Deferred;if(!this.parent.getBounds())return n.resolve(),n;void 0===i&&(i=0);var h=e.y,o=0;return e.getBounds()&&(o=e.getBounds().height),o<this.parent.getBounds().height&&(h-=this.parent.getBounds().height/2-o/2),1e-4===this.getDistance()?n.resolve():i>0?t.Tween.get(this).to({scroll:h},i,s).call(n.resolve):(this.scroll=h,n.resolve()),n},n.scrollTo=function(t){this.getBounds()?this.setScroll(t*(this.getBounds().height-this.parent.getBounds().height)):this.setScroll(0)},n.onScroll=function(){i=new t.Event("scroll"),this.dispatchEvent(i)},s});
define("CatLab/Easelbone/Utilities/Mousewheel",[],function(){var t=function(){var t=this;document.body.addEventListener("mousewheel",function(e){t.scroll(e)})},e=t.prototype;return e.scroll=function(t){this.callback&&this.callback({x:0,y:t.wheelDelta})},e.listen=function(t){this.stop(),this.callback=t},e.stop=function(){this.callback=null},new t});
define("CatLab/Easelbone/Controls/ScrollArea",["backbone","CatLab/Easelbone/Controls/ScrollBar","CatLab/Easelbone/EaselJS/DisplayObjects/ScrollArea","CatLab/Easelbone/Utilities/Mousewheel"],function(t,e,n,o){var s=function(o){_.extend(this,t.Events),this.element=o,this.scrollbar=new e(o.scrollbar),this.scrollbar.link(this),this.content=new n(o.content),this.content.on("scroll",this.onScroll,this),this.element.on("mouseover",this.enableScrollMouse,this),this.element.on("mouseout",this.disableScrollMouse,this),this.element.on("removed",this.disableScrollMouse,this),this.element.on("added",this.onAdd,this)},l=s.prototype;return l.enableScrollMouse=function(){var t=this;o.listen(function(e){t.scroll(e.y>0?50:-50)})},l.onAdd=function(){this.scrollTo(0)},l.disableScrollMouse=function(){o.stop()},l.onScroll=function(t){var e={percentage:this.content.getPercentage(),contentHeight:this.content.getBounds().height,containerHeight:this.content.parent.getBounds().height};this.trigger("scroll",e)},l.scrollTo=function(t){this.content.scrollTo(t)},l.scroll=function(t){this.content.up(t)},l.up=function(){this.content.up(25)},l.down=function(){this.content.down(25)},l.focus=function(t,e,n){return this.content.focus(t,e,n)},s});
define("CatLab/Easelbone/Controls/ListElement",[],function(){var t=function(t){this.element=t},e=t.prototype;return e.focus=function(){this.dispatchEvent("focus")},e.getDimensions=function(){return{width:this.element.boundary.x,height:this.element.boundary.y}},t});
define("CatLab/Easelbone/Controls/List",["easeljs","CatLab/Easelbone/Controls/ListElement"],function(t,e){var n=function(t){this.initialize(),this.listItems=[],void 0!==t&&this.setChildElement(t)},i=n.prototype=new t.Container;return i.setChildElement=function(t){this.childElement=t;var e=new t;this.boundary={x:e.boundary.x,y:e.boundary.y}},i.getChildElement=function(){if(void 0===this.childElement)throw"No child element set.";return this.childElement},i.updateBounds=function(){this.setBounds(0,0,this.boundary.x,this.boundary.y*this.listItems.length)},i.createElement=function(){var t=new e(new(this.getChildElement()));return this.listItems.push(t),this.addChild(t.element),t.element.y=this.boundary.y*(this.listItems.length-1),this.updateBounds(),t},n});
define("CatLab/Easelbone/Controls/FloatContainer",["easeljs","CatLab/Easelbone/Controls/ListElement"],function(t,e){var i=function(t,e){this.initialize(),this.listItems=[],void 0!==t&&this.setChildElement(t),this.rows=0,this.columns=e,this.currentColumn=0,this.curX=0,this.curY=0,this.rowHeight=0},n=i.prototype=new t.Container;return n.setChildElement=function(t){this.childElement=t;var e=this.getChildElement();this.boundary={x:e.boundary.x,y:e.boundary.y},this.rowHeight=this.boundary.y},n.getChildElement=function(e){if(void 0===this.childElement)throw"No child element set.";return this.childElement.prototype instanceof t.DisplayObject?new this.childElement:this.childElement(e)},n.updateBounds=function(){this.setBounds(0,0,this.boundary.x*this.columns,this.curY+this.rowHeight)},n.nextRow=function(){this.currentColumn=1,this.rows++,this.curY+=this.rowHeight,this.rowHeight=0},n.getNextPosition=function(){var t={};return this.currentColumn++,this.currentColumn>this.columns&&this.nextRow(),t.x=this.boundary.x*(this.currentColumn-1),t.y=this.curY,t},n.createElement=function(t){var i=new e(this.getChildElement(t));this.listItems.push(i),this.addChild(i.element);var n=this.getNextPosition();return this.rowHeight=Math.max(this.rowHeight,i.getDimensions().height),i.element.x=n.x,i.element.y=n.y,this.updateBounds(),i},n.removeAllChildren_container=n.removeAllChildren,n.removeAllChildren=function(){this.currentColumn=0,this.rows=0,this.removeAllChildren_container.apply(this,arguments)},i});
define("CatLab/Easelbone/EaselJS/DisplayObjects/Background",["easeljs"],function(i){var t,e,s,a=!1,h={},n=function(t,e){if(void 0===e&&(e={zoom:"stretch"}),this.fillOptions=e,t instanceof Image||t instanceof HTMLImageElement)this.displayobject=new i.Bitmap(t);else if(t instanceof i.DisplayObject){if(!t.getBounds())throw"Objects to be filled must have bounds set.";this.displayobject=t}else this.color=t;this.initialize(),this.initialized=!1,this.limits=null,this.debug=!1},l=n.prototype=new i.Container;return l.Container_initialize=l.initialize,l.initialize=function(){this.Container_initialize()},l.isVisible=function(){return!0},l.setLimits=function(i,t){this.limits={width:i,height:t}},l.getAvailableSpace=function(){return null!==this.limits?this.limits:(this.parent?(t=this.parent.getBounds().width,e=this.parent.getBounds().height):this.getBounds()?(t=this.getBounds().width,e=this.getBounds().height):(t=100,e=100),{width:t,height:e})},l.Container_draw=l.draw,l.getLocationHash=function(){return(s=this.getAvailableSpace()).width+":"+s.height},l.hasChanged=function(){return s=this.getLocationHash(),a=this.lastHash!==s,this.lastHash=s,a},l.center=function(i){this.displayobject&&(this.displayobject.x=(i.width-this.displayobject.getBounds().width*this.displayobject.scaleX)/2,this.displayobject.y=(i.height-this.displayobject.getBounds().height*this.displayobject.scaleY)/2)},l.draw=function(t,e){if(this.initialized&&!this.hasChanged())return this.Container_draw(t,e);this.initialized=!0,this.removeAllChildren();var s=this.getAvailableSpace();if(this.color){var a=new i.Shape;a.graphics.setStrokeStyle(0),a.graphics.beginFill(this.color),a.graphics.beginStroke(this.color),a.snapToPixel=!0,a.graphics.drawRect(0,0,s.width,s.height),this.addChild(a)}else if(this.displayobject){try{if(!this.displayobject.getBounds())return void(this.initialized=!1)}catch(i){return void(this.initialized=!1)}switch(h={x:s.width/this.displayobject.getBounds().width,y:s.height/this.displayobject.getBounds().height},this.fillOptions.zoom){case"minimum":this.displayobject.scaleX=this.displayobject.scaleY=Math.min(h.x,h.y),this.center(s);break;case"maximum":this.displayobject.scaleX=this.displayobject.scaleY=Math.max(h.x,h.y),this.center(s);break;case"stretch":case"default":this.displayobject.scaleX=h.x,this.displayobject.scaleY=h.y}this.addChild(this.displayobject)}return this.Container_draw(t,e)},i.Background=n,n});
define("CatLab/Easelbone/EaselJS/DisabledButtonHelper",["easeljs"],function(e){var t=function(e,t,n,s,i,l,o){this.initialize(e,t,n,s,i,l,o)},n=t.prototype;n.target=null,n.overLabel=null,n.outLabel=null,n.downLabel=null,n.play=!1,n.setEnabled=function(e){},n.getEnabled=function(){return this._enabled};try{Object.defineProperties(n,{enabled:{get:n.getEnabled,set:n.setEnabled}})}catch(e){}return n._isPressed=!1,n._isOver=!1,n._enabled=!1,n.initialize=function(e,t,n,s,i,l,o){e.addEventListener&&(this.target=e,e.mouseChildren=!1,this.overLabel=null==n?"over":n,this.outLabel=null==t?"out":t,this.downLabel=null==s?"down":s,this.play=i,this.setEnabled(!0),this.handleEvent({}),l&&(o&&(l.actionsEnabled=!1,l.gotoAndStop&&l.gotoAndStop(o)),e.hitArea=l))},n.toString=function(){return"[DisabledButtonHelper]"},n.handleEvent=function(e){var t,n=this.target,s=e.type;"mousedown"==s?(this._isPressed=!0,t=this.downLabel):"pressup"==s?(this._isPressed=!1,t=this._isOver?this.overLabel:this.outLabel):"rollover"==s?(this._isOver=!0,t=this._isPressed?this.downLabel:this.overLabel):(this._isOver=!1,t=this._isPressed?this.overLabel:this.outLabel),this.play?n.gotoAndPlay&&n.gotoAndPlay(t):n.gotoAndStop&&n.gotoAndStop(t)},t});
define("CatLab/FakeWebremote/Models/User",[],function(){return function(t){var n,e,i,r=t;this.getAccessToken=function(){return r},this.setId=function(t){i=t},this.getId=function(){return i},this.setName=function(t){n=t},this.getName=function(){return n},this.setAvatar=function(t){e=t},this.getAvatar=function(){return e}}});
define("CatLab/FakeWebremote/Models/Control",[],function(){return function(t,n){var i,e,r=0,s={},o=t,c=[];this.id=t,this.pushed=function(){return 0===r},this.scale=function(){return r},this.update=function(t){r>0&&0==t&&this.trigger("click"),r=t},this.getLabel=function(){return'<span class="control-label '+e+'">'+o+"</span>"},this.setStaticLabel=function(t,n){return o=t,e=n,this},this.setLabel=function(i,e){return n.emit("button:label",{id:t,label:i}),this},this.click=function(t){return this.on("click",t),this},this.on=function(t,n){return void 0===s[t]&&(s[t]=[]),s[t].push(n),this},this.trigger=function(t){var n=[];if(void 0!==s[t])for(i=0;i<s[t].length;i++)n.push(s[t][i]);for(i=0;i<n.length;i++)try{n[i]()}catch(t){console.log(t)}return this},this.off=function(t){return s[t]=[],this},this.clearEvents=function(){return s={},this},this.addDomElement=function(t){var n=this,i=[];return i.push(t.addEventListener("click",function(){n.trigger("click")})),c.push({element:t,listeners:i}),this},this.clearDomElements=function(){for(var t=0;t<c.length;t++)for(var n=0;n<c[t].listeners.length;n++)c[t].element.removeEventListener("click",c[t].listeners[n]);return c=[],this},this.isLocalAuthentication=function(){return!1},this.log=function(t){n.log("["+this.id+"] "+t)}}});
define("CatLab/FakeWebremote/Models/ControlUser",["CatLab/FakeWebremote/Models/User","CatLab/FakeWebremote/Models/Control"],function(t,o){var e=function(t){this.initialize(t)};return(e.prototype=t).setWebcontrol=function(t){this.Webcontrol=t},e.prototype.initialize=function(t){this.controls={},this.currentView=null,this.color="orange",this.colorName="orange",this.tmpid=null,this.active=!1,this.userdata=t,this.profiledata={},this.access_token=null},e.prototype.clearControls=function(){if(null!=this.currentView)for(var t=this.Webcontrol.getViewLabels(this.currentView),o=0;o<t.length;o++)this.control(t[o].id).setStaticLabel(t[o].label,"mobile")},e.prototype.clearEvents=function(){for(this.tmpid in this.controls)this.controls.hasOwnProperty(this.tmpid)&&this.controls[this.tmpid].clearEvents()},e.prototype.trigger=function(t,o){"button:down"==t?this.control(o.id).update(1):"button:up"==t?this.control(o.id).update(0):"user:login"==t?this.login(o):"user:logout"==t&&this.logout(o)},e.prototype.emit=function(t,o){return this.Webcontrol._playerEmit(this,t,o),!0},e.prototype.control=function(t){return void 0===this.controls[t]&&(this.controls[t]=new o(t,this)),this.controls[t]},e.prototype.getId=function(){return this.userdata.id},e.prototype.getName=function(){return"User "+this.getId()},e.prototype.getType=function(){return"mobile"},e.prototype.getIcon=function(){return"fa fa-mobile-phone"},e.prototype.login=function(t){var o=this;this.access_token=t.access_token,this.Webcontrol.getOAuthClient(function(t){t.profile(o.access_token,function(t){o.profiledata=t.user})})},e.prototype.getData=function(){return this.profiledata},e.prototype.logout=function(t){this.profiledata=null,this.access_token=null},e.prototype.setColor=function(t,o){this.color=t,this.colorName=o,this.emit("color:set",{color:t,name:o})},e.prototype.getColor=function(){return this.color},e.prototype.getColorName=function(){return this.colorName},e.prototype.isActive=function(){return this.active},e.prototype.toggleActive=function(){this.active=!this.active,this.setLabel()},e.prototype.setActive=function(t){this.active=t,this.setLabel()},e.prototype.setLabel=function(){1==this.active?this.control("join-game").setLabel("LEAVE"):this.control("join-game").setLabel("JOIN")},e.prototype.setView=function(t){this.currentView=t,this.clearControls(),this.emit("view:set",{id:t})},e.prototype.setUserData=function(t,o){console.log("Setting user data: ",t,o)},e.prototype.isLocalAuthentication=function(){return!0},e.prototype.log=function(t){console.log("[u:"+this.getId()+"] "+t)},e});
define("CatLab/FakeWebremote/Models/KeyboardUser",["CatLab/FakeWebremote/Models/ControlUser"],function(e){var t=function(e){void 0===e&&(e=[{id:"up",label:"↑",key:38},{id:"down",label:"↓",key:40},{id:"right",label:"→",key:39},{id:"left",label:"←",key:37},{id:"a",label:"A",key:65},{id:"b",label:"B",key:66},{id:"x",label:"X",key:88},{id:"y",label:"Y",key:89},{id:"join-game",label:"SPACE",key:32},{id:"start-game",label:"ENTER",key:13}]),this.keys=e,this.initialize({id:"keyboard"});var t,n=this,i=0;function o(o){for(i=0;i<e.length;i++)if(e[i].key==o)return t=n.control(e[i].id);return null}document.addEventListener("keydown",function(e){(t=o(e.keyCode))&&t.update(1)}),document.addEventListener("keyup",function(e){(t=o(e.keyCode))&&t.update(0)}),this.clearControls=function(){for(var t=0;t<e.length;t++)this.control(e[t].id).setStaticLabel(e[t].label,"keyboard")},this.getType=function(){return"keyboard"},this.getIcon=function(){return"fa fa-keyboard-o"},this.setView=function(e){this.clearControls()},this.emit=function(e,t){return!1},this.isLocalAuthentication=function(){return!1},this.clearControls()};return(t.prototype=new e).constructor=t,t});
define("CatLab/Easelbone/FrontController",["CatLab/Easelbone/Utilities/Loader","CatLab/Easelbone/Views/Root","CatLab/Easelbone/Views/Base","CatLab/Easelbone/Views/Layer","CatLab/Easelbone/Views/Navigatable","CatLab/Easelbone/Controls/Slider","CatLab/Easelbone/Controls/Checkbox","CatLab/Easelbone/Controls/Button","CatLab/Easelbone/Controls/Selectbox","CatLab/Easelbone/Controls/ScrollBar","CatLab/Easelbone/Controls/ScrollArea","CatLab/Easelbone/Controls/List","CatLab/Easelbone/Controls/FloatContainer","CatLab/Easelbone/EaselJS/DisplayObjects/BigText","CatLab/Easelbone/EaselJS/DisplayObjects/Placeholder","CatLab/Easelbone/EaselJS/DisplayObjects/Background","CatLab/Easelbone/EaselJS/DisabledButtonHelper","CatLab/Easelbone/Utilities/GlobalProperties","CatLab/FakeWebremote/Models/KeyboardUser"],function(e,a,o,t,l,s,b,n,r,i,C,L,E,c,d,S,B,u,p){return{initialize:function(){},setProperties:function(e){u.set(e)},Views:{Root:a,Base:o,Layer:t,Navigatable:l},Controls:{Slider:s,Checkbox:b,Button:n,Selectbox:r,ScrollBar:i,ScrollArea:C,List:L,FloatContainer:E},EaselJS:{BigText:c,Placeholder:d,Fill:S,DisabledButtonHelper:B},FakeWebremote:{KeyboardUser:p},Loader:new e}});
define("easelbone",["CatLab/Easelbone/FrontController"],function(e){return e});
